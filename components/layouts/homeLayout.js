import { Layout, Menu, message } from "antd";
import axios from "axios";
import Head from "next/head";
import Link from "next/link";
import { useState } from "react";
import { API_BASE_URL } from "../../apiconstants";
import HomeFooter from "../Footer/HomeFooter";
import HomeMenu from "../menues/homeMenu";
import HomeHeader from "../shared/homeHeader";

const { Content } = Layout;

const HomeLayout = ({ children, title }) => {
	const [activeCart, setActiveCart] = useState(false);
	const [activeWish, setActiveWish] = useState(false);
	const [visible, setVisible] = useState(false);

	const menu = (
		<Menu>
			<Menu.Item key="1">
				<Link href="/admin" passHref>
					Dashboard
				</Link>
			</Menu.Item>
			<Menu.Item key="2">
				<Link href="/" passHref>
					Your Profile
				</Link>
			</Menu.Item>
			<Menu.Item key="3" danger>
				<Link href="/auth/login" passHref>
					Login
				</Link>
			</Menu.Item>
		</Menu>
	);

	const handleSearch = () => {
		if (searchText) {
			setLoading(true);
			axios
				.get(`${API_BASE_URL}/product?key=${searchText}`)
				.then((res) => {
					setSearchData(res.data.result);
					setShowResult(true);
					setLoading(false);
				})
				.catch(() => {
					setShowResult(false);
					setLoading(false);
				});
		} else {
			message.warning("Please write first what do you want to find!");
		}
	};

	return (
		<Layout>
			<Head>
				<title>{title || "Othoba Mart"}</title>
				<meta
					name="description"
					content="Generated by create next app"
				/>
				<link rel="icon" href="/favicon.ico" />
			</Head>

			<HomeHeader
				activeWish={activeWish}
				setActiveWish={setActiveWish}
				activeCart={activeCart}
				setActiveCart={setActiveCart}
				visible={visible}
				setVisible={setVisible}
			/>

			{/* Top menu */}
			<div className="bg-white">
				<div className="container mx-auto hidden lg:block">
					<HomeMenu visible={visible} setVisible={setVisible} />
				</div>
			</div>

			<Content style={{ minHeight: "90vh", backgroundColor: "white" }}>
				<div className="container mx-auto px-3">{children}</div>
			</Content>
			<footer className="bg-white px-2">
				<HomeFooter />
			</footer>
		</Layout>
	);
};

export default HomeLayout;
